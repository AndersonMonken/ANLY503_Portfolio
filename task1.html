<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Anderson Monken" />

<meta name="date" content="2020-10-23" />

<title>task1</title>

<script src="site_libs/header-attrs-2.4.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Anderson Monken ANLY503 Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Course Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data_wrangling.html">Data Wrangling Assignment</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Exploratory Data Analysis Assignment</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="task1.html">Task 1</a>
        </li>
        <li>
          <a href="task2.html">Task 2</a>
        </li>
        <li>
          <a href="task3.html">Task 3</a>
        </li>
        <li>
          <a href="task4.html">Task 4</a>
        </li>
        <li>
          <a href="task5.html">Task 5</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="geospatial.html">Choropleth Assignment</a>
    </li>
    <li>
      <a href="network.html">Network Assignment</a>
    </li>
  </ul>
</li>
<li>
  <a href="project.html">Final Project</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/AndersonMonken/ANLY503_Portfolio">Github</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">task1</h1>
<h4 class="author">Anderson Monken</h4>
<h4 class="date">10/23/2020</h4>

</div>


<div id="account-exploration" class="section level2">
<h2>Account exploration</h2>
<p>The accounts data does not contain an average balance variable, so one is created using the transactions dataset then merged back into the main dataset. Since we are interested in knowing about accounts partitioned by their loan and credit card product usage, we create dummy variables for whether or not a client has a credit card and whether or not the user has a loan. Since these are both credit products, the most interesting way to visualize is whether a client has both types of credit products, only one, or none. Thus, a double dummy is made as a four choice factor variable.</p>
<pre class="r"><code># read in data
accounts_data &lt;- read_csv(&#39;data/accounts_analytical.csv&#39;)
transactions_data &lt;- read_csv(&#39;data/transactions.csv&#39;)

# get average balance for all accounts
mean_bal &lt;- transactions_data %&gt;% 
  group_by(account_id) %&gt;% 
  summarize(avg_balance = mean(balance))

# join average balance data to main accounts data
accounts_data &lt;- accounts_data %&gt;% 
  left_join(mean_bal, by = &#39;account_id&#39;) 

# create dummy variables for credit cards and loans
accounts_data &lt;- accounts_data %&gt;%
  mutate(cc_dummy = if_else(credit_cards &gt; 0, TRUE, FALSE, FALSE),
         loan_dummy = if_else(is.na(loan_date), FALSE, TRUE),
         double_dummy = case_when(loan_dummy == TRUE &amp; cc_dummy == TRUE ~ &quot;cc+loan&quot;,
                                  loan_dummy == TRUE ~ &quot;loan&quot;,
                                  cc_dummy == TRUE ~ &quot;cc&quot;,
                                  TRUE ~ &quot;none&quot;),
         double_dummy = fct_relevel(double_dummy, c(&quot;none&quot;,&quot;cc&quot;,&quot;loan&quot;,&quot;cc+loan&quot;)))</code></pre>
<p>The first plot shows how the average account balance is distributed based on how clients interact with credit products. We can see that clients with a loan have a greater average account balance distribution, but the same cannot be said for the use of credit cards. Having no credit products and having a credit card only lead to mainly similar shapes.</p>
<pre class="r"><code>ggplot(accounts_data, aes(x = double_dummy, 
                          y = avg_balance, 
                          fill = double_dummy)) + 
  geom_violin() +
  geom_boxplot(width=0.2, color=&quot;grey&quot;, alpha=0.05) + 
  # modify the x axis labels for presentation
  scale_x_discrete(limits = c(&#39;none&#39;,&#39;cc&#39;,&#39;loan&#39;,&#39;cc+loan&#39;), 
                   labels = c(&#39;No loan or Credit Card&#39;,&#39;Credit Card Only&#39;,&#39;Loan Only&#39;,&#39;Credit Card and Loan&#39;)) + 
  # modify the plot labels
  labs(title = &quot;Violin Plots of Bank Account Balances\nby Credit Activities&quot;,
       y = &quot;Average Balance&quot;,
       x = NULL) +
  # theme mods
  theme_tufte() +
  guides(fill = FALSE) +
  theme(title = element_text(size = 16),
        axis.text.x = element_text(size = 12),
        plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="task1_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>It is also worth considering the individual effects of a credit card on its own. As seen from the previous plot, the average balance is pretty similar for those with and without a credit card.</p>
<pre class="r"><code># credit card dummy plot
ggplot(accounts_data, aes(x = cc_dummy, 
                          y = avg_balance, 
                          fill = cc_dummy)) + 
  geom_violin() +
  geom_boxplot(width=0.2, color=&quot;grey&quot;, alpha=0.05) + 
  # modify the x axis labels for presentation
  scale_x_discrete(limits = c(FALSE, TRUE), 
                   labels = c(&#39;No Credit Card&#39;,&#39;Credit Card&#39;)) + 
  # modify the plot labels
  labs(title = &quot;Violin Plots of Bank Account Balances\nby Credit Card Product Usage&quot;,
       y = &quot;Average Balance&quot;,
       x = NULL) +
  # theme mods
  theme_tufte() +
  guides(fill = FALSE) +
  theme(title = element_text(size = 16),
        axis.text.x = element_text(size = 12),
        plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="task1_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Comparing accounts with and without a loan shows the biggest different in account balance. Accounts with loans tend to have a higher balance.</p>
<pre class="r"><code># loan dummy plot
ggplot(accounts_data, aes(x = loan_dummy, 
                          y = avg_balance, 
                          fill = loan_dummy)) + 
  geom_violin() +
  geom_boxplot(width=0.2, color=&quot;grey&quot;, alpha=0.05) + 
  # modify the x axis labels for presentation
  scale_x_discrete(limits = c(FALSE, TRUE), 
                   labels = c(&#39;No Loan&#39;,&#39;Loan&#39;)) + 
  # modify the plot labels
  labs(title = &quot;Violin Plots of Bank Account Balances\nby Loan Product Usage&quot;,
       y = &quot;Average Balance&quot;,
       x = NULL) +
  # theme mods
  theme_tufte() +
  guides(fill = FALSE) +
  theme(title = element_text(size = 16),
        axis.text.x = element_text(size = 12),
        plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="task1_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>The final plot for this analysis shows a histogram of the account balances based on their credit activities. This graph differs from the violin plot in that we can see how many clients fall into each category. Most customers do not use either credit product. This opens the opportunity for growth by having more customers take out loans, which would tend to increase the average account balance for the depository institution.</p>
<pre class="r"><code># double dummy histogram
ggplot(accounts_data, aes(x = avg_balance, 
                          fill = double_dummy)) + 
  geom_histogram(bins = 25) +
  labs(title = &quot;Histogram of Account Balances\nby Credit Activities&quot;,
       y = &quot;# of Accounts&quot;,
       x = &quot;Account Balance&quot;) +
  # remove legend
  guides(fill=FALSE) +
  # theme elements
  theme_tufte() +
  theme(title = element_text(size = 16),
        axis.text = element_text(size = 12),
        plot.title = element_text(hjust = 0.5),
        legend.position = &quot;bottom&quot;) +
  # facet the distributions and provide custom subtitles
  facet_wrap(~double_dummy, 
             labeller = labeller(double_dummy = as_labeller(c(&#39;none&#39; = &#39;No loan or Credit Card&#39;,
                                                             &#39;cc&#39; = &#39;Credit Card Only&#39;,
                                                             &#39;loan&#39; = &#39;Loan Only&#39;,
                                                             &#39;cc+loan&#39; = &#39;Credit Card and Loan&#39;)
                                                            )
                                 )
             )</code></pre>
<p><img src="task1_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
